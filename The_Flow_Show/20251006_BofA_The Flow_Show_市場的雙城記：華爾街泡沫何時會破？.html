<html lang="zh-Hant"><head><script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImU0NDI2OTFlYmNlMzcyOGEzZWQzMTYxNjYwY2NiYTJmNGNkMTMyOTQiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwMTYyNzg3NDM4ODM1OTc2Mjk5OCIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjX2EwZDM2ZTMzNmVhMjA0MTZfaW5kZXguaHRtbC0xNzUifSwiZXhwIjoxNzU5NzI5ODkyLCJpYXQiOjE3NTk3MjYyOTIsImFsZyI6IlJTMjU2In0.Qzxg9Y9zwCxp-R6yGsvjri6_IEHxx07jdRudkpq4ohmO2I7iRGW08t8CfHMF_64Tjt0sW29jmRIZQ1dA9kvlolaeRzHjHByV8orKXIyGcXWCCcOAAIqyypj2NYkVWqrQ0YzWzfQDoNpsoSoz3PRHlQ6ScvT2fghC692hAtDa3PBlxYj-3ilPNdgfA2CF0K8YNKGfwTVsYuxH3IMIl82ZQ7nofPuutrSGkrPUWCn6w0qd2UJWY_bt93PjbT2Tl3YFgomigh4uh0NCDXXi-LVXCfbF0THT0xtujVILi8UW6E41wnO3GHpkfbR0XagzUWzZFu8BUcvO1lyhqH3ix5R9yg","c_a0d36e336ea20416_index.html-175")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-05-20","imageModelName":"imagen-3.0-generate-002","imageEditModelName":"gemini-2.5-flash-image-preview","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>市場的雙城記：華爾街泡沫何時會破？</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #FDFBF7;
        }
        .card-shadow {
             box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        h2.story-title {
            text-align: center;
            font-size: 1.875rem;
            line-height: 2.25rem;
            font-weight: 700;
            color: #655A4E;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #C8B6A6;
            padding-bottom: 1rem;
        }
        h3 {
            border-bottom: 2px solid #EAE0D5;
            padding-bottom: 0.5rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 700;
            color: #8D7B68;
        }
        .chart-container {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
        }
        .gauge-chart-container {
            position: relative;
            width: 100%;
            max-width: 250px;
            margin: 0 auto;
            height: 125px;
        }
        .pulse-item {
            background-color: #F9F6F2;
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid #C8B6A6;
        }
        .emphasis {
            background-color: #FFF8E1;
            padding: 1rem;
            border-left: 4px solid #FFC107;
            border-radius: 0.25rem;
            margin: 1rem 0;
        }
        .download-btn {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            z-index: 50;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.container{width:100%}@media (min-width: 640px){.container{max-width:640px}}@media (min-width: 768px){.container{max-width:768px}}@media (min-width: 1024px){.container{max-width:1024px}}@media (min-width: 1280px){.container{max-width:1280px}}@media (min-width: 1536px){.container{max-width:1536px}}.mx-auto{margin-left:auto;margin-right:auto}.mb-10{margin-bottom:2.5rem}.mb-12{margin-bottom:3rem}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-12{margin-top:3rem}.mt-2{margin-top:0.5rem}.mt-8{margin-top:2rem}.grid{display:grid}.h-6{height:1.5rem}.h-64{height:16rem}.h-80{height:20rem}.h-96{height:24rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-7xl{max-width:80rem}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.gap-8{gap:2rem}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-x-auto{overflow-x:auto}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-l-lg{border-top-left-radius:0.5rem;border-bottom-left-radius:0.5rem}.rounded-r-lg{border-top-right-radius:0.5rem;border-bottom-right-radius:0.5rem}.border-b{border-bottom-width:1px}.bg-\[\#655A4E\]{--tw-bg-opacity:1;background-color:rgb(101 90 78 / var(--tw-bg-opacity, 1))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity:1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity:1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.p-3{padding:0.75rem}.p-4{padding:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.text-left{text-align:left}.text-center{text-align:center}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.italic{font-style:italic}.leading-relaxed{line-height:1.625}.text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-\[\#655A4E\]{--tw-text-opacity:1;color:rgb(101 90 78 / var(--tw-text-opacity, 1))}.text-\[\#8D7B68\]{--tw-text-opacity:1;color:rgb(141 123 104 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity:1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.hover\:bg-\[\#8D7B68\]:hover{--tw-bg-opacity:1;background-color:rgb(141 123 104 / var(--tw-bg-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.focus\:ring-\[\#655A4E\]:focus{--tw-ring-opacity:1;--tw-ring-color:rgb(101 90 78 / var(--tw-ring-opacity, 1))}.focus\:ring-offset-2:focus{--tw-ring-offset-width:2px}@media (min-width: 768px){.md\:h-96{height:24rem}.md\:grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.md\:p-8{padding:2rem}.md\:text-4xl{font-size:2.25rem;line-height:2.5rem}}</style></head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-7xl">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-[#655A4E]">市場的雙城記：華爾街泡沫何時會破？</h1>
            <p class="text-lg text-[#8D7B68]">一份融合BofA報告與市場智慧的深度解讀 (截至2025年10月6日)</p>
        </header>

        <main>
             <section class="mb-12">
                <h2 class="story-title">序章：市場的脈動，三分鐘速覽</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    在我帶你深入這個故事之前，我們先來聽聽市場的心跳。美國銀行最新這份報告，用幾句簡潔的話，就完美勾勒出了當下這個既亢奮又矛盾的時刻。這幾句話，就像電影開場的旁白，為我們接下來要講述的複雜劇情，定下了基調。
                </p>
                <div class="space-y-4">
                    <div class="pulse-item">
                        <p class="font-bold">時代精神 (Zeitgeist):</p>
                        <p class="italic text-gray-700">"是的，信貸市場的裂縫是個大問題，但...還不足以讓這場派對立刻結束。"</p>
                    </div>
                    <div class="pulse-item">
                        <p class="font-bold">價格的玄機 (The Price is Right):</p>
                        <p class="text-gray-700">一個驚人的巧合：過去五個月，標普500指數的每月最低點，<strong>全都出現在當月的第一個交易日</strong>。這種情況，自1928年以來，前所未見！這暗示著什麼？在我看來，這是一種強大到近乎盲目的「逢低買入」慣性正在主導市場。</p>
                    </div>
                    <div class="pulse-item">
                        <p class="font-bold">資金流的真相 (Tale of the Tape):</p>
                        <p class="text-gray-700">市場的瘋狂，數據看得最清楚。過去三週，創紀錄的<strong>1520億美元</strong>湧入全球股票ETF。而場邊的貨幣市場基金，相對於整個美股的市值比例，已經降到了除了幾個牛市頂峰外最低的水平。我來翻譯一下：<strong>現金越來越少，幾乎所有人都已經跳進舞池裡了。</strong></p>
                    </div>
                </div>
             </section>

            <section class="mb-12">
                <h2 class="story-title">第一章：市場正開著一場狂歡派對</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    故事正式開始。在市場打滾了20年，我看過不少瘋狂的派對，但2025年秋天這場，絕對能排進前三。整個金融市場就像一場盛大的流水席，香檳的泡沫映照著每個人貪婪的目光。不信？看看今年的成績單吧！BofA的數據顯示，黃金以超過45%的驚人回報一馬當先，彷彿在嘲笑那些還在談論風險的人。比特幣、國際股票緊隨其後，幾乎所有你能想到的資產，都在這場盛宴中分到了一杯羹。
                </p>
                <div class="chart-container h-96 mb-8"><canvas id="ytdReturnsChart" height="768" style="display: block; box-sizing: border-box; height: 384px; width: 1103px;" width="2206"></canvas></div>
                
                 <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    錢，到底從哪裡來？答案是：<em>從四面八方</em>。光是過去三週，就有超過1520億美元的瘋狂資金湧入全球股票ETF，其中科技股更是成為了吸金巨獸，單週就吞下了超過93億美元，雙雙創下歷史新高！這股錢潮中，我們能看到更細微的動向：新興市場債券正迎來史上第二大的年度資金流入，而另一方面，美國國債卻出現了史上第六大的資金流出。這說明什麼？<strong>市場正在拋棄避險，全面擁抱風險！</strong>
                </p>
                <div class="chart-container h-80 mb-8"><canvas id="weeklyFlowsChart" height="640" style="display: block; box-sizing: border-box; height: 320px; width: 1103px;" width="2206"></canvas></div>

                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    在這股浪潮中，普通投資者的熱情被徹底點燃。美國家庭投入股市的資產比例，飆升到了令人咋舌的31%！你沒看錯，這個數字甚至超越了2000年網路泡沫最瘋狂的時刻。市場上瀰漫著一種「這次不一樣」的樂觀氣氛，BofA的「牛熊指標」也跟著攀升至6.5，一步步逼近「極度貪婪」的警戒線。
                </p>
                 <div class="emphasis">
                    <p class="text-lg font-semibold">這種樂觀並非空穴來風。現在市場上有一種強大的論述：AI革命將顛覆所有行業，它的力量之大，讓傳統的估值模型都顯得蒼白無力。<em>在這種氛圍下，故事本身就成了基本面</em>。投資者們被一種我稱之為「錯失恐懼症」(FOMO)的情緒裹挾，害怕錯過這個時代最大的紅利，這種恐懼，已經遠遠大於虧錢的恐懼。</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="text-center p-4 bg-white rounded-lg card-shadow">
                        <h4 class="font-bold text-lg text-[#655A4E] mb-2">牛熊指標</h4>
                        <div class="gauge-chart-container"><canvas id="gaugeBullBearChart" height="250" style="display: block; box-sizing: border-box; height: 125px; width: 250px;" width="500"></canvas></div>
                        <p class="mt-2 text-sm text-gray-600">狀態：<strong class="text-orange-500">接近賣出</strong>。指標升至6.5，逼近8.0的「極度看漲」賣出區域。</p>
                    </div>
                     <div class="text-center p-4 bg-white rounded-lg card-shadow">
                        <h4 class="font-bold text-lg text-[#655A4E] mb-2">家庭股票配置</h4>
                        <div class="gauge-chart-container"><canvas id="gaugeEquityExposureChart" height="250" style="display: block; box-sizing: border-box; height: 125px; width: 250px;" width="500"></canvas></div>
                        <p class="mt-2 text-sm text-gray-600">狀態：<strong class="text-red-600">歷史新高</strong>。美國家庭股票配置比例達31%，超越網路泡沫頂峰。</p>
                    </div>
                </div>
            </section>

            <section class="mb-12">
                <h2 class="story-title">第二章：但有人發現牆角出現了裂縫</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    然而，就在派對最熱鬧的時候，一些不和諧的噪音開始傳出。BofA的報告標題——<strong>「Krunchy Kredit」（脆弱的信貸）</strong>——正是這第一聲警報。當華爾街的精英們舉杯慶祝時，城市另一端的現實世界卻是另一番景象。BofA用一張對比圖，就生動地揭示了這個「K型」社會的殘酷現實：代表富人消費的法拉利股價屢創新高，而服務於平民的「一元店」達樂公司股價卻慘遭腰斬。這不僅是貧富差距的體現，更是經濟結構的第一道裂痕——<em>一個僅靠少數富人支撐的消費市場，根基必然不穩。</em>
                </p>
                <div class="chart-container h-80 md:h-96 mb-8"><canvas id="kShapedChart" height="768" style="display: block; box-sizing: border-box; height: 384px; width: 1103px;" width="2206"></canvas></div>
                
                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    這道裂痕很快從消費端，蔓延到了信貸市場的深處。私募股權（PE），這個利用高槓桿進行收購的市場「金絲雀」，開始發出不安的鳴叫。其相對於大盤的表現已跌回2022年的低點，暗示著融資困難、退出無門的窘境。更讓我警惕的是，BofA的「現金水平規則」正式觸發了賣出信號！專業基金經理們的現金儲備已降至3.9%，低於4%的警戒線。
                </p>
                 <div class="emphasis">
                    <p class="text-lg font-semibold">這意味著什麼？想像一下，派對的酒水可能快要告罄，場內幾乎所有人都已下注，卻沒有新的資金來推高賭注。<strong>市場的買方力量正趨於枯竭，任何意外的壞消息都可能引發踩踏。</strong></p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="text-center p-4 bg-white rounded-lg card-shadow">
                        <h4 class="font-bold text-lg text-[#655A4E] mb-2">私募股權 vs 大盤</h4>
                        <div class="chart-container h-64"><canvas id="peRatioChart" height="512" style="display: block; box-sizing: border-box; height: 256px; width: 503px;" width="1007"></canvas></div>
                         <p class="mt-2 text-sm text-gray-600">PE相對大盤表現已接近2022年低點，是信貸緊縮的領先指標。</p>
                    </div>
                    <div class="text-center p-4 bg-white rounded-lg card-shadow">
                        <h4 class="font-bold text-lg text-[#655A4E] mb-2">現金水平規則</h4>
                        <div class="gauge-chart-container"><canvas id="gaugeCashRuleChart" height="250" style="display: block; box-sizing: border-box; height: 125px; width: 250px;" width="500"></canvas></div>
                        <p class="mt-2 text-sm text-gray-600">狀態：<strong class="text-red-600">觸發賣出信號</strong>。基金經理現金水平降至3.9%，低於4.0%的賣出閾值。</p>
                    </div>
                </div>
            </section>

            <section class="mb-12">
                 <h2 class="story-title">第三章：原來，派對的音樂是這樣來的</h2>
                 <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    既然警訊頻傳，為何市場還能狂歡至今？這正是故事最精彩、也最荒謬的部分。在我們這些老手之間，最近流傳著一個有趣的理論，它完美解釋了AI泡沫核心的秘密——一個看似完美的<strong>「左腳踩右腳」資本閉環</strong>。這個閉環由三方構成：手握GPU壟斷地位的「軍火商」輝達、懷揣AGI夢想的「造夢師」OpenAI，以及善於資本運作的「老地主」甲骨文。它們上演了一齣金融魔術：輝達投資OpenAI，OpenAI拿錢向甲骨文買算力，甲骨文再拿著訂單去資本市場融資，最後把融來的錢還給輝達買GPU。
                </p>
                 <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    在這個循環中，資金並未真正創造價值，卻讓三者的營收和股價螺旋式上升，共同吹大了一個巨大的泡沫。這也解釋了BofA數據中的一個核心轉變：科技巨頭正將現金流的重心從「股票回購」大規模轉向「資本支出」。從2024到2026年，「七巨頭」的資本支出預計將從2520億美元飆升至4650億美元！這正是上述資本閉環在宏觀數據上的體現。這場由真實資本支出驅動的遊戲，是它與2000年網路泡沫最大的不同，也讓泡沫顯得格外堅實。
                </p>
                 <div class="chart-container h-96 mb-8"><canvas id="capexVsBuybackChart" height="768" style="display: block; box-sizing: border-box; height: 384px; width: 1103px;" width="2206"></canvas></div>
                 <div class="emphasis">
                    <p class="text-lg font-semibold">而維繫這台「永動機」運轉的終極能源，來自全球的央行。BofA的數據一針見血地指出，<em>歷史上所有泡沫的破裂都是由央行緊縮觸發的</em>。而當下，全球央行在過去兩個月內史無前例地<strong>「零升息」</strong>。這無異於為這場烈火烹油的派對關掉了消防系統，讓所有人相信音樂不會停止。市場正是在「AI革命方向不變」和「聯準會降息預期」的雙重信仰下，無視美國政府關門等政治紛擾，持續推動股市創下新高。</p>
                </div>
                <div class="chart-container h-80 md:h-96"><canvas id="rateHikeChart" height="768" style="display: block; box-sizing: border-box; height: 384px; width: 1103px;" width="2206"></canvas></div>
            </section>

            <section class="mb-12">
                <h2 class="story-title">第四章：派對還能玩多久？聰明人的生存法則</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    我們正處在一個分裂的世界：一邊是AI的繁華天堂，另一邊是實體經濟的蕭條地獄。BofA的結論是：「信貸的裂痕雖然令人擔心，但還不至於立刻讓派對結束。」那麼，身處其中的我們該如何抉擇？這份報告和近期市場的智慧，給我們的不是一個簡單的答案，而是一份更聰明的行動指南。
                </p>
                <h3>第一招：買個保險，以防萬一（美元避險）</h3>
                <p class="text-gray-700 mb-4">故事的第一個結局，可能是經濟的裂縫擴大為一場全面的危機。在這種情況下，全球資金將瘋狂尋求避險，而美元是最終的避風港。因此，配置一部分美元資產，就好像是為你投資組合中的風險資產，購買一份最直接的保險。</p>

                <h3>第二招：一手抓AI，一手抓鏟子（啞鈴式配置）</h3>
                <p class="text-gray-700 mb-4">完全錯過AI的狂歡無疑是遺憾的。BofA建議採用「啞鈴式策略」：一端，繼續持有AI派對中的核心資產；另一端，則去佈局那些為派對提供燃料的「賣鏟人」——能源、大宗商品、原材料，甚至包括估值相對便宜的英國股票。因為AI數據中心的耗電量是個天文數字，這將直接拉動對這些實體資產的需求。</p>
                
                <h3>第三招：眼光放遠，押注世界格局的改變</h3>
                <p class="text-gray-700 mb-4">BofA在報告中描繪了一個更宏大的圖景：世界正從「美國獨強」的時代，慢慢走向一個「全球再平衡」的未來。這意味著過去十年由美元、美股、科技巨頭主導的單一故事，可能將被一個更多元化的劇本所取代。在這個新劇本中，黃金的避險價值將更加凸顯，企業投入真金白銀的「資本支出」會比回購股票更受重視，而一些新興市場（如中國的科技巨頭）可能迎來追趕的機會。</p>
                 <div class="overflow-x-auto mb-8">
                    <table class="w-full text-sm text-left text-gray-500">
                        <thead class="text-xs text-gray-700 uppercase bg-gray-100">
                            <tr>
                                <th scope="col" class="px-6 py-3 rounded-l-lg bg-red-100">正在退燒的主題 (Out)</th>
                                <th scope="col" class="px-6 py-3 rounded-r-lg bg-green-100">正在興起的主題 (In)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="bg-white border-b"><td class="px-6 py-4">美國獨強 (US exceptionalism)</td><td class="px-6 py-4">全球再平衡 (Global rebalancing)</td></tr>
                            <tr class="bg-gray-50 border-b"><td class="px-6 py-4">美元 (US dollar)</td><td class="px-6 py-4">黃金 (Gold)</td></tr>
                             <tr class="bg-white border-b"><td class="px-6 py-4">七巨頭 (Magnificent 7)</td><td class="px-6 py-4">中國BATX (China BATX)</td></tr>
                            <tr class="bg-gray-50 border-b"><td class="px-6 py-4">股票回購 (Buybacks)</td><td class="px-6 py-4">資本支出 (Capex)</td></tr>
                        </tbody>
                    </table>
                </div>
                 <div class="emphasis">
                    <p class="text-lg font-semibold">基於此，BofA的兩個長期逆向佈局值得深思：一是做多幾乎無人問津的<strong>長天期零息債券</strong>，賭的是經濟放緩與AI的長期通縮效應終將迫使聯準會降息；二是關注<strong>中國的銀行股</strong>，作為全球再平衡下的「追趕型交易」。近期市場上，一些嗅覺敏銳的資金已經開始行動，加碼阿里巴巴和百度，同時日本央行也開啟了貨幣政策正常化的大門，這些都預示著這場「雙城記」的结局，或許將在華爾街之外的更廣闊舞台上寫下。</p>
                </div>
            </section>
            
            <section>
                <h2 class="story-title">最後，泡沫真的會破嗎？</h2>
                 <p class="text-lg text-gray-700 leading-relaxed mb-6">
                    看完數據和故事，讓我們回到最核心的問題：AI泡沫到底會不會破？答案很複雜，我們可以從三個層面來思考。
                </p>
                <h3>1. 短期內不會破：故事和錢都還沒跑</h3>
                <p class="text-gray-700 mb-4">一場派對要繼續，需要精彩的故事和源源不絕的資金，而這兩者目前都還不缺。AI的故事足夠宏大，科技巨頭數千億美元的真實投資也為其背書。更關鍵的是，全球央行不敢輕易升息，市場流動性依然充沛。因此，短期內泡沫要立刻破裂，難度很高。</p>

                <h3>2. 但終將會破：地基已經出現裂縫</h3>
                <p class="text-gray-700 mb-4">但再華麗的建築也怕地基不穩。這個泡沫建立在分裂的「K型」經濟之上，多數人的消費力正在萎縮。基金經理的現金見底、私募市場壓力重重，這些都是地基的裂縫。BofA的逆向指標已亮起紅燈，就像有經驗的船長在晴天聞到了風暴的鹹味。</p>
                
                <h3>3. 刺破泡沫的那根針，會是什麼？</h3>
                <p class="text-gray-700 mb-4">最後刺破泡沫的那根「針」會是什麼？最可能的有三根：第一，<strong>通膨再次抬頭</strong>，迫使央行出手緊縮，這是最經典的劇本。第二，<strong>AI故事說不下去</strong>，技術遇到瓶頸或無法變現，讓投資人失去耐心。第三，無法預測的<strong>「黑天鵝」</strong>，例如一場切斷AI產業鏈的地緣政治衝突。</p>
                
                <div class="mt-8 space-y-4">
                    <div class="pulse-item text-center">
                        <p class="text-lg font-semibold text-gray-800 italic">"市場的鐘擺總會擺回來，智者會提前站在它將要經過的地方。"</p>
                    </div>
                </div>
            </section>

        </main>

        <footer class="text-center mt-12 text-xs text-gray-500">
            <p>數據來源：美國銀行(BofA) 2025年10月2日《The Flow Show - Krunchy Kredit》研究報告及市場公開資訊。</p>
            <p>免責聲明：本儀表板內容僅為基於公開信息的市場分析，不構成任何投資建議。投資有風險，入市需謹慎。</p>
        </footer>
    </div>
    
    

<script>
document.addEventListener('DOMContentLoaded', function () {
    Chart.defaults.font.family = "'Noto Sans TC', sans-serif";
    Chart.defaults.color = '#655A4E';

    const createGaugeChart = (ctx, value, max, color, unit = '') => {
        if (!ctx) return;
        new Chart(ctx, {
            type: 'doughnut',
            data: { datasets: [{ data: [value, max - value], backgroundColor: [color, '#EAEAEA'], borderWidth: 0, circumference: 180, rotation: 270 }] },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: {
                    tooltip: { enabled: false },
                    title: { display: true, text: `${value}${unit}`, position: 'bottom', align: 'center', font: { size: 28, weight: 'bold' }, color: color, padding: { top: -45 } }
                },
                cutout: '70%',
            }
        });
    };
    
    createGaugeChart(document.getElementById('gaugeCashRuleChart')?.getContext('2d'), 3.9, 10, '#C62828', '%');
    createGaugeChart(document.getElementById('gaugeBullBearChart')?.getContext('2d'), 6.5, 10, '#F57C00');
    createGaugeChart(document.getElementById('gaugeEquityExposureChart')?.getContext('2d'), 31, 50, '#C62828', '%');

    const ytdReturnsCtx = document.getElementById('ytdReturnsChart');
    if(ytdReturnsCtx) {
        const ytdData = { '黃金': 45.4, '比特幣': 28.7, '國際股票': 24.6, '美國股票': 14.2, '投資級債': 9.9, '高收益債': 9.6, '政府公債': 7.3, '大宗商品': 3.5, '現金': 3.3, '美元': -9.8, '石油': -15.4 };
        new Chart(ytdReturnsCtx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: Object.keys(ytdData),
                datasets: [{
                    label: '年度至今回報率 (%)',
                    data: Object.values(ytdData),
                    backgroundColor: Object.values(ytdData).map(v => v >= 0 ? 'rgba(102, 187, 106, 0.7)' : 'rgba(239, 83, 80, 0.7)'),
                    borderColor: Object.values(ytdData).map(v => v >= 0 ? '#4CAF50' : '#F44336'),
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y', responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false }, title: { display: true, text: '年度至今各大類資產回報排行', font: {size: 16}} },
                scales: { x: { ticks: { callback: (value) => value + '%' } } }
            }
        });
    }
    
    const weeklyFlowsCtx = document.getElementById('weeklyFlowsChart');
    if(weeklyFlowsCtx) {
        const weeklyFlowsData = { '股票': 26.0, '現金': 20.8, '債券': 19.9, '黃金': 5.9, '加密貨幣': 2.9, '美國國債': -7.5 };
         new Chart(weeklyFlowsCtx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: Object.keys(weeklyFlowsData),
                datasets: [{
                    label: '單週資金流 (十億美元)',
                    data: Object.values(weeklyFlowsData),
                    backgroundColor: Object.values(weeklyFlowsData).map(v => v >= 0 ? 'rgba(66, 165, 245, 0.7)' : 'rgba(255, 138, 101, 0.7)'),
                     borderColor: Object.values(weeklyFlowsData).map(v => v >= 0 ? '#1E88E5' : '#F4511E'),
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { legend: { display: false }, title: { display: true, text: '本週主要資產資金流向', font: {size: 16}} },
                scales: { y: { ticks: { callback: (value) => '$' + value + 'bn' } } }
            }
        });
    }

    const kShapedCtx = document.getElementById('kShapedChart');
    if (kShapedCtx) {
        new Chart(kShapedCtx.getContext('2d'), {
            type: 'line',
            data: {
                labels: ['2023', '2024', '2025'],
                datasets: [
                    { label: '法拉利 (高收入)', data: [300, 420, 480], borderColor: '#42A5F5', yAxisID: 'y', tension: 0.1 },
                    { label: '達樂公司 (低收入)', data: [180, 120, 100], borderColor: '#EF5350', yAxisID: 'y', tension: 0.1 }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { title: { display: true, text: '高低收入消費代表股價表現 ($/sh)', font: { size: 16 } }, legend: { position: 'bottom' } },
                scales: { y: { type: 'linear', display: true, position: 'left', title: { display: true, text: '股價 ($)' } } }
            }
        });
    }

    const peRatioCtx = document.getElementById('peRatioChart');
    if(peRatioCtx) {
        new Chart(peRatioCtx.getContext('2d'), {
            type: 'line',
            data: {
                labels: ['2022', '2023', '2024', '2025'],
                datasets: [{
                    label: '私募股權(PSP) vs 標普500(SPY) 相對價格',
                    data: [0.13, 0.105, 0.115, 0.105],
                    borderColor: '#8D7B68', fill: true, tension: 0.3
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { title: { display: true, text: '私募股權相對大盤表現', font: {size: 16} }, legend: { display: false } },
                scales: { y: { beginAtZero: false, title: { display: true, text: '相對價格比'}}}
            }
        });
    }

    const capexVsBuybackCtx = document.getElementById('capexVsBuybackChart');
    if(capexVsBuybackCtx) {
        new Chart(capexVsBuybackCtx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: ['2024', '2025 (預估)', '2026 (預估)'],
                datasets: [
                    { label: '資本支出 (Capex)', data: [252, 385, 465], backgroundColor: '#42A5F5' },
                    { label: '股票回購 (Buybacks)', data: [181, 187, 154], backgroundColor: '#BDBDBD' }
                ]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { title: { display: true, text: '七巨頭現金流用途轉變 (單位：十億美元)', font: { size: 16 } }, legend: { position: 'bottom' } },
                scales: { y: { stacked: false, title: { display: true, text: '金額 ($bn)' } } }
            }
        });
    }

    const rateHikeCtx = document.getElementById('rateHikeChart');
    if(rateHikeCtx) {
        new Chart(rateHikeCtx.getContext('2d'), {
            type: 'bar',
            data: {
                labels: ['Sep 22', '2023', '2024', 'Aug-Sep 25'],
                datasets: [{ label: '全球央行升息次數', data: [34, 10, 5, 0], backgroundColor: '#8D7B68' }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                plugins: { title: { display: true, text: '全球央行升息週期與暫停', font: { size: 16 } }, legend: { display: false } },
                scales: { y: { beginAtZero: true, title: { display: true, text: '每月升息次數'} } }
            }
        });
    }
    
    // Download button logic
    const downloadBtn = document.getElementById('downloadBtn');
    if (downloadBtn) {
        downloadBtn.addEventListener('click', function() {
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            const formattedDate = `${yyyy}${mm}${dd}`;

            const title = "市場的雙城記：華爾街泡沫何時會破？";
            const filename = `${formattedDate}_BofA_The Flow_Show_${title}.html`;
            
            // Create a clone of the document to modify for download
            const clonedDoc = document.documentElement.cloneNode(true);
            
            // Remove the download button from the cloned document
            const btnToRemove = clonedDoc.querySelector('#downloadBtn');
            if(btnToRemove){
                btnToRemove.remove();
            }

            const blob = new Blob([clonedDoc.outerHTML], { type: 'text/html;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        });
    }
});
</script>



</body></html>